language: python
python:
    - "3.6"
    - "3.7"
    - "3.8"
    - "3.8-dev"
    - "3.9-dev"
dist: xenial
os: linux
install:
    - pip install -r dev-requirements.txt
    - pip install -r requirements.txt
before_script:
    - python --version
script:
    - flake8 public_html --max-line-length 265
    - nosetests -v
    - pip-missing-reqs--ignore-module=pytest
    - pip-extra-reqs .
    - pip check
after_script:
    - pip freeze
notifications:
  irc:
    channels:
      - "chat.freenode.net#miraheze-bots"
    on_success: change
    on_failure: always
    template:
      - "%{repository}/%{branch}/%{commit} - %{author} %{message} %{build_url}"
    
